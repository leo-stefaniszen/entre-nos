---
import "../styles/global.css";
import logo from "../assets/images/logo/logo.png";

interface EventMeta {
  startDate: string;
  endDate?: string;
  locationName: string;
  locationAddress: string;
  offerUrl: string;
}

interface Props {
  title: string;
  description?: string;
  canonical?: string;
  ogImage?: string;
  eventMeta?: EventMeta;
}

const {
  title,
  description = "Entre Nós: os 4 pilares do empreendedorismo para mulheres protagonistas.",
  canonical,
  ogImage = "/LOGO%20ENTRE%20N%C3%93S.png",
  eventMeta,
} = Astro.props;

const currentUrl = canonical ?? Astro.url.toString();
const ogImageUrl = new URL(ogImage, currentUrl).toString();

const structuredData = eventMeta
  ? {
      "@context": "https://schema.org",
      "@type": "Event",
      name: title,
      description,
      startDate: eventMeta.startDate,
      endDate: eventMeta.endDate ?? eventMeta.startDate,
      eventAttendanceMode: "https://schema.org/OfflineEventAttendanceMode",
      eventStatus: "https://schema.org/EventScheduled",
      image: [ogImageUrl],
      location: {
        "@type": "Place",
        name: eventMeta.locationName,
        address: eventMeta.locationAddress,
      },
      offers: {
        "@type": "Offer",
        url: eventMeta.offerUrl,
        availability: "https://schema.org/InStock",
      },
      organizer: {
        "@type": "Organization",
        name: "Entre Nós",
        url: currentUrl,
      },
    }
  : {
      "@context": "https://schema.org",
      "@type": "Organization",
      name: "Entre Nós",
      url: currentUrl,
      logo: ogImageUrl,
      sameAs: ["https://www.instagram.com/silmara_stylist/"],
      description,
    };
---

<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <link rel="canonical" href={currentUrl} />

    <meta property="og:type" content="website" />
    <meta property="og:locale" content="pt_BR" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={currentUrl} />
    <meta property="og:image" content={ogImageUrl} />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImageUrl} />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:wght@600;700;800&display=swap"
      rel="stylesheet"
    />
    <title>{title}</title>
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)}></script>
  </head>
  <body>
    <div class="bg-glow bg-glow-a"></div>
    <div class="bg-glow bg-glow-b"></div>

    <nav class="navbar">
      <div class="container nav-inner">
        <a href="#inicio" class="brand" aria-label="Ir para início">
          <img src={logo.src} alt="Entre Nós" />
        </a>

        <div class="nav-links">
          <a href="#inicio">Início</a>
          <a href="#manifesto">Manifesto</a>
          <a href="#pilares">4 Pilares</a>
          <a href="#palestrantes">Palestrantes</a>
          <a href="#evento" class="nav-cta">Quero minha vaga</a>
        </div>
      </div>
    </nav>

    <main>
      <slot />
    </main>

    <button class="next-section-btn" type="button" data-next-section aria-label="Ir para a próxima seção">↓</button>
    <script src="/scripts/next-section.js" defer></script>
  </body>
</html>
